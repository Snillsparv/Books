<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bokcirkeln - V&aring;r n&auml;sta bok</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400;1,700&family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --cream: #faf6f1;
            --dark: #1a1a2e;
            --gold: #c9a84c;
            --gold-light: #e8d498;
            --wine: #722f37;
            --wine-light: #9b4d54;
            --teal: #2d6a6a;
            --teal-light: #3d8a8a;
            --paper: #f5f0e8;
            --ink: #2c2c2c;
            --muted: #6b6b6b;
            --shadow: rgba(26, 26, 46, 0.12);
            --shadow-heavy: rgba(26, 26, 46, 0.25);
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--cream);
            color: var(--ink);
            line-height: 1.7;
            overflow-x: hidden;
        }

        /* ── Hero Section ── */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            background: linear-gradient(160deg, var(--dark) 0%, #16213e 50%, #0f3460 100%);
            color: var(--cream);
            position: relative;
            overflow: hidden;
            padding: 2rem;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 50%, rgba(201, 168, 76, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 20%, rgba(114, 47, 55, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 80%, rgba(45, 106, 106, 0.08) 0%, transparent 50%);
        }

        .hero-particles {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            overflow: hidden;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            font-size: 1.4rem;
            opacity: 0;
            animation: float-up linear infinite;
            user-select: none;
        }

        @keyframes float-up {
            0% { opacity: 0; transform: translateY(100vh) rotate(0deg); }
            10% { opacity: 0.25; }
            90% { opacity: 0.25; }
            100% { opacity: 0; transform: translateY(-10vh) rotate(360deg); }
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero-overline {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            letter-spacing: 0.35em;
            text-transform: uppercase;
            color: var(--gold);
            margin-bottom: 1.5rem;
            opacity: 0;
            animation: fadeInUp 0.8s ease forwards 0.3s;
        }

        .hero h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(3rem, 8vw, 6rem);
            font-weight: 900;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            opacity: 0;
            animation: fadeInUp 0.8s ease forwards 0.5s;
        }

        .hero h1 em {
            font-style: italic;
            color: var(--gold-light);
        }

        .hero-subtitle {
            font-size: 1.15rem;
            font-weight: 300;
            color: rgba(250, 246, 241, 0.7);
            max-width: 500px;
            margin: 0 auto 3rem;
            opacity: 0;
            animation: fadeInUp 0.8s ease forwards 0.7s;
        }

        .hero-cta {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 2.5rem;
            background: var(--gold);
            color: var(--dark);
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95rem;
            letter-spacing: 0.05em;
            border-radius: 50px;
            transition: all 0.3s ease;
            opacity: 0;
            animation: fadeInUp 0.8s ease forwards 0.9s;
        }

        .hero-cta:hover {
            background: var(--gold-light);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(201, 168, 76, 0.3);
        }

        .hero-cta svg {
            width: 18px;
            height: 18px;
            transition: transform 0.3s ease;
        }

        .hero-cta:hover svg {
            transform: translateY(3px);
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ── Section Shared ── */
        section {
            padding: 6rem 2rem;
        }

        .section-header {
            text-align: center;
            margin-bottom: 4rem;
        }

        .section-header h2 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 0.75rem;
        }

        .section-header p {
            color: var(--muted);
            font-size: 1.05rem;
            max-width: 550px;
            margin: 0 auto;
        }

        /* ── Books Grid ── */
        #books {
            background: var(--paper);
            max-width: 100%;
        }

        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 2.5rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .book-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 4px 20px var(--shadow);
            transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
            cursor: default;
            position: relative;
        }

        .book-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 50px var(--shadow-heavy);
        }

        .book-card-accent {
            height: 6px;
            width: 100%;
        }

        .book-card-body {
            padding: 2rem 2rem 1.5rem;
        }

        .book-genre {
            display: inline-block;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            margin-bottom: 1rem;
        }

        .book-card h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.6rem;
            font-weight: 700;
            line-height: 1.25;
            margin-bottom: 0.3rem;
            color: var(--dark);
        }

        .book-author {
            font-size: 0.95rem;
            color: var(--muted);
            margin-bottom: 1rem;
            font-style: italic;
        }

        .book-year {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--muted);
        }

        .book-description {
            font-size: 0.95rem;
            line-height: 1.8;
            color: #444;
            margin-bottom: 1.25rem;
        }

        .book-quote {
            border-left: 3px solid var(--gold);
            padding: 0.75rem 1rem;
            margin-bottom: 1.25rem;
            background: var(--cream);
            border-radius: 0 8px 8px 0;
        }

        .book-quote p {
            font-family: 'Playfair Display', serif;
            font-style: italic;
            font-size: 0.9rem;
            color: var(--ink);
            line-height: 1.6;
        }

        .book-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .book-tag {
            font-size: 0.75rem;
            padding: 0.25rem 0.7rem;
            background: var(--cream);
            border-radius: 50px;
            color: var(--muted);
            font-weight: 500;
        }

        /* Color Themes per book */
        .theme-ishiguro .book-card-accent { background: linear-gradient(90deg, #e8b4b8, #f5d5c8); }
        .theme-ishiguro .book-genre { background: #fdf0f0; color: #b85c6a; }

        .theme-chiang .book-card-accent { background: linear-gradient(90deg, #64b5f6, #81d4fa); }
        .theme-chiang .book-genre { background: #e8f4fd; color: #1976d2; }

        .theme-eco .book-card-accent { background: linear-gradient(90deg, var(--gold), #d4a843); }
        .theme-eco .book-genre { background: #fdf8ec; color: #8b6914; }

        .theme-vonnegut .book-card-accent { background: linear-gradient(90deg, #ef5350, #ff8a65); }
        .theme-vonnegut .book-genre { background: #fde8e8; color: #c62828; }

        .theme-fowles .book-card-accent { background: linear-gradient(90deg, var(--teal), #4db6ac); }
        .theme-fowles .book-genre { background: #e6f5f5; color: var(--teal); }

        .theme-gibson .book-card-accent { background: linear-gradient(90deg, #7c4dff, #b388ff); }
        .theme-gibson .book-genre { background: #ede7f6; color: #5e35b1; }

        /* ── Voting Section ── */
        #voting {
            background: linear-gradient(160deg, var(--dark) 0%, #16213e 100%);
            color: var(--cream);
            min-height: 80vh;
        }

        #voting .section-header h2 {
            color: var(--cream);
        }

        #voting .section-header p {
            color: rgba(250, 246, 241, 0.6);
        }

        .voting-container {
            max-width: 750px;
            margin: 0 auto;
        }

        /* Steps indicator */
        .steps-indicator {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .step-dot {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 500;
            background: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .step-dot.active {
            background: var(--gold);
            color: var(--dark);
            font-weight: 600;
        }

        .step-dot.completed {
            background: rgba(201, 168, 76, 0.2);
            color: var(--gold);
        }

        .step-num {
            width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 700;
            background: rgba(255, 255, 255, 0.1);
            font-family: 'JetBrains Mono', monospace;
        }

        .step-dot.active .step-num {
            background: var(--dark);
            color: var(--gold);
        }

        .step-dot.completed .step-num {
            background: var(--gold);
            color: var(--dark);
        }

        /* Voter select */
        .voter-select-panel {
            text-align: center;
            margin-bottom: 2rem;
        }

        .voter-select-panel label {
            display: block;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 0.75rem;
            letter-spacing: 0.05em;
        }

        .voter-buttons {
            display: flex;
            justify-content: center;
            gap: 0.6rem;
            flex-wrap: wrap;
        }

        .voter-btn {
            padding: 0.6rem 1.4rem;
            border: 2px solid rgba(255, 255, 255, 0.15);
            background: transparent;
            color: rgba(255, 255, 255, 0.6);
            border-radius: 50px;
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.25s ease;
        }

        .voter-btn:hover {
            border-color: var(--gold);
            color: var(--gold);
        }

        .voter-btn.selected {
            border-color: var(--gold);
            background: var(--gold);
            color: var(--dark);
            font-weight: 600;
        }

        .voter-btn .check {
            display: none;
            margin-left: 0.3rem;
        }

        .voter-btn.has-voted .check {
            display: inline;
        }

        .voter-btn.has-voted {
            border-color: rgba(201, 168, 76, 0.4);
            color: rgba(201, 168, 76, 0.6);
        }

        .voter-btn.has-voted.selected {
            border-color: var(--gold);
            background: var(--gold);
            color: var(--dark);
        }

        /* Voting card */
        .vote-instruction {
            text-align: center;
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 2rem;
            min-height: 1.5em;
        }

        .vote-instruction strong {
            color: var(--gold-light);
        }

        .vote-options {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-bottom: 2rem;
        }

        .vote-option {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.5rem;
            background: rgba(255, 255, 255, 0.04);
            border: 2px solid rgba(255, 255, 255, 0.08);
            border-radius: 14px;
            cursor: pointer;
            transition: all 0.25s ease;
            user-select: none;
        }

        .vote-option:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.15);
        }

        .vote-option.selected {
            background: rgba(201, 168, 76, 0.1);
            border-color: var(--gold);
        }

        .vote-option.eliminated {
            opacity: 0.3;
            pointer-events: none;
            text-decoration: line-through;
        }

        .vote-radio {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all 0.25s ease;
        }

        .vote-option.selected .vote-radio {
            border-color: var(--gold);
            background: var(--gold);
        }

        .vote-radio-inner {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--dark);
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .vote-option.selected .vote-radio-inner {
            opacity: 1;
        }

        .vote-option-info {
            flex: 1;
        }

        .vote-option-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .vote-option-author {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.4);
        }

        .vote-submit-btn {
            display: block;
            width: 100%;
            padding: 1rem;
            background: var(--gold);
            color: var(--dark);
            border: none;
            border-radius: 14px;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 0.03em;
        }

        .vote-submit-btn:hover:not(:disabled) {
            background: var(--gold-light);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(201, 168, 76, 0.25);
        }

        .vote-submit-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        /* Results */
        .results-panel {
            margin-top: 2rem;
            display: none;
        }

        .results-panel.visible {
            display: block;
        }

        .round-result {
            margin-bottom: 2rem;
        }

        .round-result h4 {
            font-family: 'Playfair Display', serif;
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: var(--gold-light);
        }

        .result-bar-container {
            margin-bottom: 0.75rem;
        }

        .result-bar-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.3rem;
            font-size: 0.85rem;
        }

        .result-bar-label span:first-child {
            font-weight: 500;
        }

        .result-bar-label span:last-child {
            color: rgba(255, 255, 255, 0.5);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
        }

        .result-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            overflow: hidden;
        }

        .result-bar-fill {
            height: 100%;
            border-radius: 10px;
            background: linear-gradient(90deg, var(--gold), var(--gold-light));
            transition: width 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
            width: 0%;
        }

        .result-bar-container.eliminated .result-bar-fill {
            background: rgba(255, 255, 255, 0.2);
        }

        .result-bar-container.eliminated .result-bar-label span:first-child {
            text-decoration: line-through;
            opacity: 0.5;
        }

        .elimination-note {
            font-size: 0.8rem;
            color: var(--wine-light);
            font-style: italic;
            margin-top: 0.5rem;
        }

        /* Winner */
        .winner-panel {
            text-align: center;
            padding: 3rem 2rem;
            display: none;
        }

        .winner-panel.visible {
            display: block;
        }

        .winner-trophy {
            font-size: 4rem;
            margin-bottom: 1rem;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .winner-panel h3 {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: var(--gold-light);
            margin-bottom: 0.5rem;
        }

        .winner-panel p {
            color: rgba(255, 255, 255, 0.6);
            font-size: 1rem;
        }

        .winner-book-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: white;
            margin: 1rem 0 0.25rem;
        }

        .winner-book-author {
            font-size: 1.1rem;
            color: var(--gold);
            font-style: italic;
        }

        /* Reset button */
        .reset-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 2rem;
            padding: 0.7rem 1.5rem;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: rgba(255, 255, 255, 0.5);
            border-radius: 50px;
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.25s ease;
        }

        .reset-btn:hover {
            border-color: rgba(255, 255, 255, 0.3);
            color: rgba(255, 255, 255, 0.8);
        }

        /* ── Footer ── */
        footer {
            text-align: center;
            padding: 3rem 2rem;
            background: var(--dark);
            color: rgba(255, 255, 255, 0.3);
            font-size: 0.8rem;
        }

        footer span {
            color: var(--gold);
        }

        /* ── Animations on scroll ── */
        .book-card {
            opacity: 0;
            transform: translateY(40px);
            transition: opacity 0.6s ease, transform 0.6s ease, box-shadow 0.4s ease;
        }

        .book-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* ── Responsive ── */
        @media (max-width: 768px) {
            .books-grid {
                grid-template-columns: 1fr;
                padding: 0 0.5rem;
            }

            section {
                padding: 4rem 1.25rem;
            }

            .voter-buttons {
                gap: 0.4rem;
            }

            .voter-btn {
                padding: 0.5rem 1rem;
                font-size: 0.8rem;
            }

            .step-dot {
                padding: 0.4rem 0.7rem;
                font-size: 0.7rem;
            }
        }

        /* Hidden utility */
        .hidden { display: none !important; }
    </style>
</head>
<body>

<!-- ════════════════ HERO ════════════════ -->
<section class="hero">
    <div class="hero-particles" id="particles"></div>
    <div class="hero-content">
        <div class="hero-overline">Jonas &middot; Jessan &middot; Josse &middot; Bulf &middot; Emilie</div>
        <h1>V&aring;r n&auml;sta <em>bok</em></h1>
        <p class="hero-subtitle">Sex fantastiska b&ouml;cker. Fem l&auml;sare. En bok att dela. Utforska titlarna och r&ouml;sta p&aring; din favorit.</p>
        <a href="#books" class="hero-cta">
            Utforska b&ouml;ckerna
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M19 12l-7 7-7-7"/></svg>
        </a>
    </div>
</section>

<!-- ════════════════ BOOKS ════════════════ -->
<section id="books">
    <div class="section-header">
        <h2>B&ouml;ckerna</h2>
        <p>Varje bok &auml;r en resa. L&auml;s, k&auml;nn, och l&aring;t dig f&ouml;rf&ouml;ras &mdash; sedan r&ouml;star vi.</p>
    </div>

    <div class="books-grid">

        <!-- Klara och Solen -->
        <div class="book-card theme-ishiguro">
            <div class="book-card-accent"></div>
            <div class="book-card-body">
                <span class="book-genre">Litteratur &middot; Sci-fi</span>
                <h3>Klara och Solen</h3>
                <p class="book-author">Kazuo Ishiguro &nbsp;<span class="book-year">2021</span></p>
                <p class="book-description">
                    Ber&auml;ttad genom &ouml;gonen p&aring; Klara, en artificiell v&auml;n som observerar v&auml;rlden fr&aring;n ett skyltf&ouml;nster.
                    Med sin ovanliga blick avsl&ouml;jar hon vad det inneb&auml;r att &auml;lska, att vara ensam och att vara m&auml;nsklig.
                    Ishiguro skriver med en stillsam sk&ouml;nhet som sm&auml;lter hj&auml;rtat.
                </p>
                <div class="book-quote">
                    <p>&rdquo;Solen v&auml;rmde alltid n&aring;gon. Det var hennes s&auml;tt att visa v&auml;nlighet.&rdquo;</p>
                </div>
                <div class="book-tags">
                    <span class="book-tag">Nobelpristagare</span>
                    <span class="book-tag">AI &amp; m&auml;nsklighet</span>
                    <span class="book-tag">&Ouml;mhet</span>
                </div>
            </div>
        </div>

        <!-- Exhalation -->
        <div class="book-card theme-chiang">
            <div class="book-card-accent"></div>
            <div class="book-card-body">
                <span class="book-genre">Sci-fi &middot; Noveller</span>
                <h3>Exhalation</h3>
                <p class="book-author">Ted Chiang &nbsp;<span class="book-year">2019</span></p>
                <p class="book-description">
                    Nio noveller som utforskar fri vilja, tidens natur och vad det inneb&auml;r att vara medveten.
                    Ted Chiang skriver science fiction som f&aring;r en att stanna upp mitt i en mening och t&auml;nka:
                    &rdquo;S&aring; har jag aldrig sett p&aring; det f&ouml;rut.&rdquo; Varje ber&auml;ttelse &auml;r en liten juvel.
                </p>
                <div class="book-quote">
                    <p>&rdquo;The universe began as an enormous breath being held.&rdquo;</p>
                </div>
                <div class="book-tags">
                    <span class="book-tag">Tankeexperiment</span>
                    <span class="book-tag">Filosofisk sci-fi</span>
                    <span class="book-tag">Briljant</span>
                </div>
            </div>
        </div>

        <!-- Foucaults pendel -->
        <div class="book-card theme-eco">
            <div class="book-card-accent"></div>
            <div class="book-card-body">
                <span class="book-genre">Litteratur &middot; Mysterium</span>
                <h3>Foucaults pendel</h3>
                <p class="book-author">Umberto Eco &nbsp;<span class="book-year">1988</span></p>
                <p class="book-description">
                    Tre f&ouml;rlagsredakt&ouml;rer hittar p&aring; en gigantisk konspiration f&ouml;r skojs skull &mdash;
                    tills den b&ouml;rjar bli verklig. En labyrintisk, intellektuell thriller som v&auml;ver samman
                    tempelriddare, kabbala och hemliga s&auml;llskap. F&ouml;r dig som &auml;lskar att g&aring; vilse i tankar.
                </p>
                <div class="book-quote">
                    <p>&rdquo;Jag tror att det finns ber&auml;ttelser som man bara kan ber&auml;tta f&ouml;r sig sj&auml;lv.&rdquo;</p>
                </div>
                <div class="book-tags">
                    <span class="book-tag">Konspirationer</span>
                    <span class="book-tag">Intellektuell</span>
                    <span class="book-tag">Episk</span>
                </div>
            </div>
        </div>

        <!-- Slakthus 5 -->
        <div class="book-card theme-vonnegut">
            <div class="book-card-accent"></div>
            <div class="book-card-body">
                <span class="book-genre">Klassiker &middot; Satir</span>
                <h3>Slakthus 5</h3>
                <p class="book-author">Kurt Vonnegut &nbsp;<span class="book-year">1969</span></p>
                <p class="book-description">
                    Billy Pilgrim har &rdquo;lossnat i tiden&rdquo; och kastas mellan bombningen av Dresden,
                    ett utomjordiskt zoo och efterkrigstidens Amerika. Vonneguts m&auml;sterverk &auml;r
                    p&aring; en g&aring;ng hilariskt roligt och outhärdligt sorgligt. &rdquo;So it goes.&rdquo;
                </p>
                <div class="book-quote">
                    <p>&rdquo;So it goes.&rdquo;</p>
                </div>
                <div class="book-tags">
                    <span class="book-tag">Antikrig</span>
                    <span class="book-tag">Tidsresor</span>
                    <span class="book-tag">Humor &amp; sorg</span>
                </div>
            </div>
        </div>

        <!-- Illusionisten -->
        <div class="book-card theme-fowles">
            <div class="book-card-accent"></div>
            <div class="book-card-body">
                <span class="book-genre">Litteratur &middot; Psykologisk</span>
                <h3>Illusionisten</h3>
                <p class="book-author">John Fowles &nbsp;<span class="book-year">1965</span></p>
                <p class="book-description">
                    En ung engelsman anl&auml;nder till en grekisk &ouml; och dras in i en mystisk miljon&auml;rs
                    elaborerade psykologiska spel. Ingenting &auml;r vad det verkar vara. En bok som vrider och v&auml;nder
                    p&aring; verkligheten tills man inte l&auml;ngre vet vad som &auml;r sant &mdash; och &auml;lskar det.
                </p>
                <div class="book-quote">
                    <p>&rdquo;An intelligent woman is a woman with whom one can be as stupid as one wants.&rdquo;</p>
                </div>
                <div class="book-tags">
                    <span class="book-tag">Psykologiskt spel</span>
                    <span class="book-tag">Grekland</span>
                    <span class="book-tag">Mystik</span>
                </div>
            </div>
        </div>

        <!-- Neuromancer -->
        <div class="book-card theme-gibson">
            <div class="book-card-accent"></div>
            <div class="book-card-body">
                <span class="book-genre">Cyberpunk &middot; Sci-fi</span>
                <h3>Neuromancer</h3>
                <p class="book-author">William Gibson &nbsp;<span class="book-year">1984</span></p>
                <p class="book-description">
                    Boken som uppfann cyberpunk. Case, en utbr&auml;nd hackare, f&aring;r en sista chans att
                    jaga sig in i cyberrymden och utf&ouml;ra det ultimata dataintrånget. Gibson m&aring;lade en framtid
                    som vi fortfarande lever oss in i &mdash; neonljus, AI och en v&auml;rld p&aring; kanten.
                </p>
                <div class="book-quote">
                    <p>&rdquo;The sky above the port was the color of television, tuned to a dead channel.&rdquo;</p>
                </div>
                <div class="book-tags">
                    <span class="book-tag">Cyberpunk-klassiker</span>
                    <span class="book-tag">Hackers</span>
                    <span class="book-tag">Vision&auml;rt</span>
                </div>
            </div>
        </div>

    </div>
</section>

<!-- ════════════════ VOTING ════════════════ -->
<section id="voting">
    <div class="section-header">
        <h2>R&ouml;stningen</h2>
        <p>Varje omg&aring;ng elimineras boken med f&auml;rst r&ouml;ster. Alla r&ouml;star, sedan g&aring;r vi vidare &mdash; tills en bok st&aring;r kvar.</p>
    </div>

    <div class="voting-container">
        <div class="steps-indicator" id="stepsIndicator"></div>

        <div class="voter-select-panel">
            <label>Vem r&ouml;star?</label>
            <div class="voter-buttons" id="voterButtons"></div>
        </div>

        <p class="vote-instruction" id="voteInstruction"></p>

        <div class="vote-options" id="voteOptions"></div>

        <button class="vote-submit-btn" id="submitVoteBtn" disabled>R&ouml;sta</button>

        <div class="results-panel" id="resultsPanel"></div>
        <div class="winner-panel" id="winnerPanel">
            <div class="winner-trophy">&#9733;</div>
            <p>Bokcirkeln har valt</p>
            <div class="winner-book-title" id="winnerTitle"></div>
            <div class="winner-book-author" id="winnerAuthor"></div>
            <h3>Grattis &mdash; vi har en bok!</h3>
        </div>

        <div style="text-align:center;">
            <button class="reset-btn" id="resetBtn">&#8634; B&ouml;rja om fr&aring;n scratch</button>
        </div>
    </div>
</section>

<!-- ════════════════ FOOTER ════════════════ -->
<footer>
    <p>Bokcirkeln 2026 &mdash; gjord med <span>&hearts;</span> f&ouml;r b&ouml;cker och v&auml;nskap</p>
</footer>

<script>
(function() {
    'use strict';

    // ── Book data ──
    const BOOKS = [
        { id: 'ishiguro', title: 'Klara och Solen', author: 'Kazuo Ishiguro' },
        { id: 'chiang', title: 'Exhalation', author: 'Ted Chiang' },
        { id: 'eco', title: 'Foucaults pendel', author: 'Umberto Eco' },
        { id: 'vonnegut', title: 'Slakthus 5', author: 'Kurt Vonnegut' },
        { id: 'fowles', title: 'Illusionisten', author: 'John Fowles' },
        { id: 'gibson', title: 'Neuromancer', author: 'William Gibson' }
    ];

    const MEMBERS = ['Jonas', 'Jessan', 'Josse', 'Bulf', 'Emilie'];

    // ── State ──
    let state = loadState() || createFreshState();

    function createFreshState() {
        return {
            currentRound: 0,
            rounds: [],
            eliminatedBooks: [],
            selectedVoter: null,
            selectedBook: null,
            finished: false,
            winner: null
        };
    }

    function loadState() {
        try {
            const saved = localStorage.getItem('bookclub_vote_state');
            return saved ? JSON.parse(saved) : null;
        } catch(e) { return null; }
    }

    function saveState() {
        try {
            localStorage.setItem('bookclub_vote_state', JSON.stringify(state));
        } catch(e) {}
    }

    function getTotalRounds() {
        return BOOKS.length - 1; // 5 rounds to go from 6 to 1
    }

    function getCurrentRoundData() {
        if (!state.rounds[state.currentRound]) {
            state.rounds[state.currentRound] = { votes: {} };
        }
        return state.rounds[state.currentRound];
    }

    function getActiveBooks() {
        return BOOKS.filter(b => !state.eliminatedBooks.includes(b.id));
    }

    function getRoundVoters() {
        const round = getCurrentRoundData();
        return MEMBERS.filter(m => round.votes[m] !== undefined);
    }

    function allVoted() {
        return getRoundVoters().length === MEMBERS.length;
    }

    // ── Render steps ──
    function renderSteps() {
        const container = document.getElementById('stepsIndicator');
        container.innerHTML = '';
        const total = getTotalRounds();
        for (let i = 0; i < total; i++) {
            const dot = document.createElement('div');
            dot.className = 'step-dot';
            if (i === state.currentRound && !state.finished) dot.classList.add('active');
            if (i < state.currentRound) dot.classList.add('completed');
            dot.innerHTML = `<span class="step-num">${i + 1}</span> Omg\u00e5ng ${i + 1}`;
            container.appendChild(dot);
        }
    }

    // ── Render voter buttons ──
    function renderVoterButtons() {
        const container = document.getElementById('voterButtons');
        container.innerHTML = '';
        const roundVoters = getRoundVoters();
        MEMBERS.forEach(name => {
            const btn = document.createElement('button');
            btn.className = 'voter-btn';
            const hasVoted = roundVoters.includes(name);
            if (hasVoted) btn.classList.add('has-voted');
            if (state.selectedVoter === name) btn.classList.add('selected');
            btn.innerHTML = `${name}<span class="check"> \u2713</span>`;
            btn.addEventListener('click', () => {
                state.selectedVoter = name;
                state.selectedBook = null;
                saveState();
                render();
            });
            container.appendChild(btn);
        });
    }

    // ── Render vote options ──
    function renderVoteOptions() {
        const container = document.getElementById('voteOptions');
        const instruction = document.getElementById('voteInstruction');
        const submitBtn = document.getElementById('submitVoteBtn');
        container.innerHTML = '';

        if (state.finished) {
            container.classList.add('hidden');
            submitBtn.classList.add('hidden');
            instruction.textContent = '';
            return;
        }

        container.classList.remove('hidden');
        submitBtn.classList.remove('hidden');

        if (!state.selectedVoter) {
            instruction.innerHTML = 'V&auml;lj ditt namn ovan f&ouml;r att r&ouml;sta.';
            submitBtn.disabled = true;
            // Show books but not interactive
            getActiveBooks().forEach(book => {
                const opt = createVoteOption(book, true);
                container.appendChild(opt);
            });
            return;
        }

        const round = getCurrentRoundData();
        const hasVoted = round.votes[state.selectedVoter] !== undefined;

        if (hasVoted && !allVoted()) {
            instruction.innerHTML = `<strong>${state.selectedVoter}</strong> har r&ouml;stat! V&auml;nta p&aring; att alla ska r&ouml;sta.`;
            submitBtn.disabled = true;
            getActiveBooks().forEach(book => {
                const opt = createVoteOption(book, true);
                container.appendChild(opt);
            });
            return;
        }

        if (allVoted()) {
            instruction.innerHTML = 'Alla har r&ouml;stat! Tryck f&ouml;r att se resultatet.';
            submitBtn.disabled = false;
            submitBtn.textContent = 'Visa resultat';
            container.classList.add('hidden');
            return;
        }

        instruction.innerHTML = `<strong>${state.selectedVoter}</strong>, vilken bok vill du l&auml;sa mest?`;
        submitBtn.textContent = 'R\u00f6sta';

        getActiveBooks().forEach(book => {
            const opt = createVoteOption(book, false);
            container.appendChild(opt);
        });

        submitBtn.disabled = !state.selectedBook;
    }

    function createVoteOption(book, disabled) {
        const opt = document.createElement('div');
        opt.className = 'vote-option';
        if (state.selectedBook === book.id) opt.classList.add('selected');
        opt.innerHTML = `
            <div class="vote-radio"><div class="vote-radio-inner"></div></div>
            <div class="vote-option-info">
                <div class="vote-option-title">${book.title}</div>
                <div class="vote-option-author">${book.author}</div>
            </div>
        `;
        if (!disabled) {
            opt.addEventListener('click', () => {
                state.selectedBook = book.id;
                saveState();
                render();
            });
        } else {
            opt.style.cursor = 'default';
        }
        return opt;
    }

    // ── Submit vote ──
    function handleSubmit() {
        if (state.finished) return;

        if (allVoted()) {
            processRound();
            return;
        }

        if (!state.selectedVoter || !state.selectedBook) return;

        const round = getCurrentRoundData();
        if (round.votes[state.selectedVoter] !== undefined) return;

        round.votes[state.selectedVoter] = state.selectedBook;
        state.selectedBook = null;

        saveState();
        render();
    }

    // ── Process round ──
    function processRound() {
        const round = getCurrentRoundData();
        const activeBooks = getActiveBooks();

        // Count votes
        const counts = {};
        activeBooks.forEach(b => counts[b.id] = 0);
        Object.values(round.votes).forEach(bookId => {
            counts[bookId] = (counts[bookId] || 0) + 1;
        });

        // Find min votes
        const minVotes = Math.min(...Object.values(counts));
        const losers = Object.keys(counts).filter(id => counts[id] === minVotes);

        // If there's a tie for last, eliminate the first one alphabetically (deterministic)
        const eliminated = losers[0];
        state.eliminatedBooks.push(eliminated);

        round.counts = counts;
        round.eliminated = eliminated;

        // Check if we have a winner
        const remaining = getActiveBooks();
        if (remaining.length === 1) {
            state.finished = true;
            state.winner = remaining[0];
        } else {
            state.currentRound++;
        }

        state.selectedVoter = null;
        state.selectedBook = null;
        saveState();
        render();
        renderResults();
    }

    // ── Render results ──
    function renderResults() {
        const panel = document.getElementById('resultsPanel');
        panel.innerHTML = '';

        const completedRounds = state.rounds.filter(r => r && r.counts);
        if (completedRounds.length === 0) {
            panel.classList.remove('visible');
            return;
        }

        panel.classList.add('visible');

        completedRounds.forEach((round, i) => {
            const div = document.createElement('div');
            div.className = 'round-result';

            const eliminatedBook = BOOKS.find(b => b.id === round.eliminated);
            let html = `<h4>Omg\u00e5ng ${i + 1}</h4>`;

            // Sort by votes descending
            const sorted = Object.entries(round.counts).sort((a, b) => b[1] - a[1]);
            const maxVotes = Math.max(...sorted.map(s => s[1]));

            sorted.forEach(([bookId, votes]) => {
                const book = BOOKS.find(b => b.id === bookId);
                const isEliminated = bookId === round.eliminated;
                const pct = maxVotes > 0 ? (votes / MEMBERS.length) * 100 : 0;
                html += `
                    <div class="result-bar-container ${isEliminated ? 'eliminated' : ''}">
                        <div class="result-bar-label">
                            <span>${book.title} ${isEliminated ? '(eliminerad)' : ''}</span>
                            <span>${votes} r\u00f6st${votes !== 1 ? 'er' : ''}</span>
                        </div>
                        <div class="result-bar">
                            <div class="result-bar-fill" style="width: ${pct}%"></div>
                        </div>
                    </div>
                `;
            });

            div.innerHTML = html;
            panel.appendChild(div);
        });

        // Animate bars
        requestAnimationFrame(() => {
            panel.querySelectorAll('.result-bar-fill').forEach(bar => {
                bar.style.width = bar.style.width;
            });
        });
    }

    // ── Render winner ──
    function renderWinner() {
        const panel = document.getElementById('winnerPanel');
        if (state.finished && state.winner) {
            panel.classList.add('visible');
            document.getElementById('winnerTitle').textContent = state.winner.title;
            document.getElementById('winnerAuthor').textContent = state.winner.author;
            document.getElementById('submitVoteBtn').classList.add('hidden');
        } else {
            panel.classList.remove('visible');
        }
    }

    // ── Master render ──
    function render() {
        renderSteps();
        renderVoterButtons();
        renderVoteOptions();
        renderResults();
        renderWinner();
    }

    // ── Reset ──
    document.getElementById('resetBtn').addEventListener('click', () => {
        if (confirm('\u00c4r du s\u00e4ker p\u00e5 att du vill b\u00f6rja om helt?')) {
            state = createFreshState();
            saveState();
            render();
        }
    });

    // ── Submit ──
    document.getElementById('submitVoteBtn').addEventListener('click', handleSubmit);

    // ── Scroll animations ──
    const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry, i) => {
            if (entry.isIntersecting) {
                setTimeout(() => entry.target.classList.add('visible'), i * 100);
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.1 });

    document.querySelectorAll('.book-card').forEach(card => observer.observe(card));

    // ── Floating particles ──
    const symbols = ['\u2726', '\u2727', '\u2605', '\u2022', '\u25cf', '\u2736'];
    const particleContainer = document.getElementById('particles');
    for (let i = 0; i < 20; i++) {
        const p = document.createElement('span');
        p.className = 'particle';
        p.textContent = symbols[Math.floor(Math.random() * symbols.length)];
        p.style.left = Math.random() * 100 + '%';
        p.style.animationDuration = (15 + Math.random() * 25) + 's';
        p.style.animationDelay = (Math.random() * 20) + 's';
        p.style.fontSize = (0.6 + Math.random() * 1.2) + 'rem';
        particleContainer.appendChild(p);
    }

    // ── Init ──
    render();
})();
</script>

</body>
</html>
